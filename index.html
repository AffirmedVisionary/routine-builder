<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playful Time-Aware Routine Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            background-image: url('https://cdn.midjourney.com/3b9f4c48-677b-403f-86b3-b0cf69331ecf/0_2.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        .activity-bar {
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 20px;
        }
        
        .activity-bar:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .free-time-block {
            border: 2px dashed #d1d5db;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(156, 163, 175, 0.1) 10px,
                rgba(156, 163, 175, 0.1) 20px
            );
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .free-time-block:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f59e0b;
            animation: confetti-fall 3s linear infinite;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-out {
            animation: fadeOut 0.3s ease-out forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }
        
        .success-check {
            animation: successPulse 0.6s ease-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .calendar-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 16px;
        }
        
        .calendar-grid {
            display: grid;
            gap: 20px;
            grid-template-columns: 60px 1fr;
        }
        
        .time-rail {
            position: sticky;
            top: 120px;
            z-index: 30;
            background: white;
            border-right: 1px solid #e5e7eb;
            padding-right: 12px;
        }
        
        .time-label {
            height: 60px;
            display: flex;
            align-items: flex-start;
            font-size: 12px;
            color: #6b7280;
            padding-top: 4px;
            justify-content: center;
        }
        
        .days-grid {
            display: grid;
            gap: 16px;
            position: relative;
        }
        
        .grid-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            pointer-events: none;
            z-index: 1;
        }
        
        .grid-line {
            height: 1px;
            background: #f3f4f6;
            margin-bottom: 59px;
        }
        
        .day-column {
            position: relative;
            z-index: 2;
        }
        
        .day-header {
            position: sticky;
            top: 120px;
            background: white;
            z-index: 20;
            padding: 12px 0;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 8px;
            font-weight: 600;
            text-align: center;
            color: #374151;
        }
        
        .day-content {
            position: relative;
            min-height: 960px;
        }
        
        .activity-card {
            position: absolute;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }
        
        .activity-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .activity-card.overlapped {
            left: 8px;
            right: 8px;
            z-index: 11;
        }
        
        .activity-title {
            font-weight: 500;
            font-size: 14px;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .activity-time {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.2;
        }
        
        .free-time-block {
            position: absolute;
            left: 0;
            right: 0;
            background: rgba(156, 163, 175, 0.1);
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 5;
        }
        
        .free-time-block:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }
        
        .free-time-content {
            text-align: center;
            color: #6b7280;
            font-size: 12px;
        }
        
        .showing-free-time .activity-card {
            opacity: 0.6;
        }
        
        .showing-free-time .free-time-block {
            background: rgba(59, 130, 246, 0.15);
            border-color: #3b82f6;
        }
        
        .expand-hours-btn {
            position: sticky;
            top: 180px;
            z-index: 25;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 4px 8px;
            font-size: 11px;
            color: #6b7280;
            cursor: pointer;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .expand-hours-btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }
        
        /* Responsive Grid */
        @media (min-width: 1024px) {
            .days-grid {
                grid-template-columns: repeat(7, 1fr);
            }
        }
        
        @media (min-width: 640px) and (max-width: 1023px) {
            .days-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 639px) {
            .days-grid {
                grid-template-columns: 1fr;
            }
            .calendar-container {
                padding: 12px;
            }
            .calendar-grid {
                gap: 12px;
                grid-template-columns: 50px 1fr;
            }
        }
        
        .category-work { background-color: #3b82f6; color: white; }
        .category-rest { background-color: #10b981; color: white; }
        .category-selfcare { background-color: #f59e0b; color: white; }
        .category-other { background-color: #8b5cf6; color: white; }
        
        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.16) 0%, rgba(255, 255, 255, 0.24) 100%);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            position: relative;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-radius: inherit;
            pointer-events: none;
        }
        
        .glass-card > * {
            position: relative;
            z-index: 1;
        }
        
        .dark .glass-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            color: white;
        }
        
        .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
            color: white;
        }
        
        .dark .text-gray-800 {
            color: white !important;
        }
        
        .dark .text-gray-700 {
            color: #e5e7eb !important;
        }
        
        .dark .text-gray-600 {
            color: #d1d5db !important;
        }
        
        /* Default white text for all elements */
        body, p, li, div, span, h1, h2, h3, h4, h5, h6, label {
            color: white !important;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* Navigation menu text stays dark */
        header, header * {
            color: #374151 !important;
            text-shadow: none !important;
        }
        
        /* Control buttons text stays dark */
        .bg-purple-300, .bg-purple-300 *,
        .bg-blue-300, .bg-blue-300 *,
        .bg-pink-300, .bg-pink-300 *,
        .bg-indigo-300, .bg-indigo-300 *,
        .bg-orange-300, .bg-orange-300 * {
            color: #374151 !important;
            text-shadow: none !important;
        }
        
        /* Form inputs and selects stay dark */
        input, select, textarea {
            color: #374151 !important;
            text-shadow: none !important;
        }
        
        /* Placeholder text stays dark */
        input::placeholder, select::placeholder, textarea::placeholder {
            color: #6b7280 !important;
            text-shadow: none !important;
        }
        
        /* Container sections with their own backgrounds keep dark text */
        .bg-purple-50, .bg-purple-50 *,
        .bg-blue-50, .bg-blue-50 *,
        .bg-green-50, .bg-green-50 *,
        .bg-yellow-50, .bg-yellow-50 *,
        .bg-gray-50, .bg-gray-50 *,
        .bg-white, .bg-white *,
        .bg-gray-100, .bg-gray-100 * {
            color: #374151 !important;
            text-shadow: none !important;
        }
        
        /* Modal content keeps dark text */
        .modal .bg-white, .modal .bg-white * {
            color: #374151 !important;
            text-shadow: none !important;
        }
        
        /* Remove global hover effects - only apply to specific elements that need it */
        /* Navigation hover colors */
        header *:hover {
            color: #8b5cf6 !important;
            text-shadow: none !important;
        }
        
        /* Keep container section text unchanged on hover */
        .bg-purple-50 *:hover,
        .bg-blue-50 *:hover,
        .bg-green-50 *:hover,
        .bg-yellow-50 *:hover,
        .bg-gray-50 *:hover,
        .bg-white *:hover,
        .bg-gray-100 *:hover,
        .modal .bg-white *:hover,
        .bg-purple-300 *:hover,
        .bg-blue-300 *:hover,
        .bg-pink-300 *:hover,
        .bg-indigo-300 *:hover,
        .bg-orange-300 *:hover,
        input:hover,
        select:hover,
        textarea:hover {
            color: inherit !important;
            text-shadow: inherit !important;
        }
        
        /* Improve placeholder text */
        input::placeholder, textarea::placeholder {
            color: #6b7280 !important;
        }
        
        .dark input, .dark select, .dark textarea {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .dark input::placeholder {
            color: #9ca3af;
        }
        
        .dark button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .dark .bg-white {
            background: rgba(255, 255, 255, 0.1) !important;
            color: white !important;
        }
        
        .dark .hover\\:bg-gray-50:hover {
            background: rgba(255, 255, 255, 0.2) !important;
        }
        
        .dark .border-gray-300 {
            border-color: rgba(255, 255, 255, 0.2) !important;
        }
        
        .dark .text-gray-500 {
            color: #d1d5db !important;
        }
        
        .dark .bg-gray-50 {
            background: rgba(255, 255, 255, 0.05) !important;
        }
        
        .dark .bg-gray-100 {
            background: rgba(255, 255, 255, 0.1) !important;
        }
        
        .dark .hover\\:bg-gray-200:hover {
            background: rgba(255, 255, 255, 0.2) !important;
        }
        
        .dark .bg-purple-50, .dark .bg-purple-50 * {
            background: rgba(139, 92, 246, 0.2) !important;
            color: white !important;
        }
        
        .dark .bg-blue-50, .dark .bg-blue-50 * {
            background: rgba(59, 130, 246, 0.2) !important;
            color: white !important;
        }
        
        .dark .bg-gray-50, .dark .bg-gray-50 * {
            background: rgba(255, 255, 255, 0.05) !important;
            color: white !important;
        }
        
        .dark .text-purple-700 {
            color: #c4b5fd !important;
        }
        
        .dark .text-blue-700 {
            color: #93c5fd !important;
        }
        
        .dark .text-purple-600 {
            color: #c4b5fd !important;
        }
        
        .dark .bg-gradient-to-r {
            background: rgba(139, 92, 246, 0.2) !important;
            color: white !important;
        }
        
        .modal {
            backdrop-filter: blur(4px);
        }
        
        .donut-chart {
            transform: rotate(-90deg);
        }
        
        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .tooltip.show {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen transition-colors duration-300" id="body">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 cursor-pointer" id="homeLink">Visionary Flow Week</h1>
            <div class="flex items-center gap-6">
                <nav class="hidden md:flex gap-6">
                    <button id="showApp" class="text-gray-600 hover:text-purple-600 font-medium transition-colors">Flow</button>
                    <button id="showAbout" class="text-gray-600 hover:text-purple-600 font-medium transition-colors">About</button>
                    <button id="showContact" class="text-gray-600 hover:text-purple-600 font-medium transition-colors">Contact</button>
                </nav>
                <button id="themeToggle" class="p-2 rounded-lg transition-colors" aria-label="Toggle theme">
                    <span id="themeIcon">üåô</span>
                </button>
                <!-- Mobile menu button -->
                <button id="mobileMenuToggle" class="md:hidden p-2 rounded-lg transition-colors">
                    <span id="mobileMenuIcon">‚ò∞</span>
                </button>
            </div>
        </div>
        <!-- Mobile menu -->
        <div id="mobileMenu" class="md:hidden bg-white border-t border-gray-200 hidden">
            <div class="container mx-auto px-4 py-3 flex flex-col gap-3">
                <button id="showAppMobile" class="text-left text-gray-600 hover:text-purple-600 font-medium transition-colors">Flow</button>
                <button id="showAboutMobile" class="text-left text-gray-600 hover:text-purple-600 font-medium transition-colors">About</button>
                <button id="showContactMobile" class="text-left text-gray-600 hover:text-purple-600 font-medium transition-colors">Contact</button>
            </div>
        </div>
    </header>

    <!-- Motivation Banner -->
    <div class="bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3">
        <div class="container mx-auto px-4 text-center">
            <p id="motivationText" class="font-medium">Building great routines takes time - you're doing amazing!</p>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="container mx-auto px-4 py-16 pb-16 max-w-4xl">
        <div class="glass-card rounded-2xl p-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">Visionary Flow Week</h1>
            <p class="text-xl text-gray-600 mb-12 max-w-2xl mx-auto">Transform your week from chaotic to intentional with our intuitive visual planning tool designed for visionaries.</p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button id="startPlanning" class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-4 px-8 rounded-lg transition-all duration-200 text-lg shadow-lg hover:shadow-xl border-2 border-purple-800">
                    Start Planning Your Week
                </button>
                <button id="learnMore" class="bg-white hover:bg-gray-100 text-purple-800 font-bold py-4 px-8 rounded-lg border-3 border-purple-700 transition-all duration-200 text-lg shadow-lg hover:shadow-xl">
                    Learn More
                </button>
            </div>
            
            <div class="mt-16 grid md:grid-cols-3 gap-8 text-left">
                <div class="bg-white bg-opacity-50 p-6 rounded-xl">
                    <div class="text-3xl mb-4">üìÖ</div>
                    <h3 class="text-lg font-semibold mb-2">Visual Calendar</h3>
                    <p class="text-gray-600">See your entire week at a glance with color-coded activities and smart time management.</p>
                </div>
                <div class="bg-white bg-opacity-50 p-6 rounded-xl">
                    <div class="text-3xl mb-4">‚öñÔ∏è</div>
                    <h3 class="text-lg font-semibold mb-2">Perfect Balance</h3>
                    <p class="text-gray-600">Track work, rest, and self-care to maintain a healthy, sustainable routine.</p>
                </div>
                <div class="bg-white bg-opacity-50 p-6 rounded-xl">
                    <div class="text-3xl mb-4">üìä</div>
                    <h3 class="text-lg font-semibold mb-2">Weekly Insights</h3>
                    <p class="text-gray-600">Get personalized suggestions and analytics to optimize your weekly flow.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <div id="mainContent" class="container mx-auto px-4 py-8 pb-16 max-w-7xl hidden">
        <!-- Setup Form -->
        <div class="glass-card rounded-2xl p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Add Your Activities</h2>
            
            <form id="activityForm" class="space-y-4">
                <div class="grid md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Activity Name</label>
                        <input type="text" id="activityName" placeholder="e.g., Morning workout" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="categorySelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="work">Work/Business</option>
                            <option value="rest">Rest</option>
                            <option value="selfcare">Self-Care</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Start</label>
                            <input type="time" id="startTime" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">End</label>
                            <input type="time" id="endTime" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">Days (select multiple for repeat activities)</label>
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-2">
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="monday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Monday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="tuesday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Tuesday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="wednesday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Wednesday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="thursday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Thursday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="friday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Friday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="saturday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Saturday</span>
                        </label>
                        <label class="flex items-center space-x-2 p-2 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="checkbox" value="sunday" class="day-checkbox text-purple-600 focus:ring-purple-500">
                            <span class="text-sm">Sunday</span>
                        </label>
                    </div>
                </div>
                
                <div id="timeValidation" class="text-red-600 text-sm hidden"></div>
                
                <div class="flex justify-center">
                    <button type="submit" class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 min-w-44 min-h-11 shadow-lg hover:shadow-xl border-2 border-purple-800">
                        Add Activity
                    </button>
                </div>
            </form>
        </div>

        <!-- Controls -->
        <div class="flex flex-wrap gap-4 mb-8 justify-center">
            <button id="viewFreeTime" class="bg-purple-300 hover:bg-purple-400 text-purple-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 min-w-44 min-h-11">
                View Free Time
            </button>
            <button id="showSummary" class="bg-blue-300 hover:bg-blue-400 text-blue-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 min-w-44 min-h-11">
                Weekly Summary
            </button>
            <button id="resetWeek" class="bg-pink-300 hover:bg-pink-400 text-pink-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 min-w-44 min-h-11">
                Reset My Week
            </button>
            <button id="exportWeek" class="bg-indigo-300 hover:bg-indigo-400 text-indigo-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 min-w-44 min-h-11">
                Export Schedule
            </button>
        </div>

        <!-- Calendar -->
        <div class="glass-card rounded-2xl p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Your Weekly Calendar</h2>
            
            <div class="calendar-container">
                <div class="calendar-grid">
                    <!-- Time Rail -->
                    <div class="time-rail">
                        <div class="expand-hours-btn" id="expandHours">
                            <span id="expandText">Expand hours</span>
                        </div>
                        <div id="timeLabels">
                            <!-- Time labels will be generated here -->
                        </div>
                    </div>
                    
                    <!-- Days Grid -->
                    <div class="days-grid" id="daysGrid">
                        <!-- Grid lines -->
                        <div class="grid-lines" id="gridLines">
                            <!-- Grid lines will be generated here -->
                        </div>
                        
                        <!-- Day columns will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Weekly Summary Modal -->
        <div id="summaryModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-90vh overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-semibold text-gray-800">Weekly Summary</h2>
                            <button id="closeSummary" class="text-gray-500 hover:text-gray-700 text-2xl min-w-11 min-h-11">&times;</button>
                        </div>
                        
                        <!-- KPIs -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                            <div class="bg-blue-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-blue-600" id="totalScheduled">0h</div>
                                <div class="text-sm text-gray-600">Scheduled Hours</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-green-600" id="totalFree">0h</div>
                                <div class="text-sm text-gray-600">Free Hours</div>
                            </div>
                            <div class="bg-yellow-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-yellow-600" id="longestFree">0h</div>
                                <div class="text-sm text-gray-600">Longest Free Block</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-purple-600" id="busiestDay">-</div>
                                <div class="text-sm text-gray-600">Busiest Day</div>
                            </div>
                        </div>
                        
                        <!-- Category Breakdown -->
                        <div class="grid md:grid-cols-2 gap-8 mb-8">
                            <div>
                                <h3 class="text-lg font-semibold mb-4">Time by Category</h3>
                                <div class="space-y-3" id="categoryBreakdown">
                                    <!-- Category bars will be generated here -->
                                </div>
                            </div>
                            <div class="flex justify-center items-center">
                                <div class="relative">
                                    <svg width="200" height="200" class="donut-chart">
                                        <circle cx="100" cy="100" r="80" fill="none" stroke="#e5e7eb" stroke-width="20"/>
                                        <circle id="workArc" cx="100" cy="100" r="80" fill="none" stroke="#3b82f6" stroke-width="20" stroke-dasharray="0 502" stroke-linecap="round"/>
                                        <circle id="restArc" cx="100" cy="100" r="80" fill="none" stroke="#10b981" stroke-width="20" stroke-dasharray="0 502" stroke-linecap="round"/>
                                        <circle id="selfcareArc" cx="100" cy="100" r="80" fill="none" stroke="#f59e0b" stroke-width="20" stroke-dasharray="0 502" stroke-linecap="round"/>
                                        <circle id="otherArc" cx="100" cy="100" r="80" fill="none" stroke="#8b5cf6" stroke-width="20" stroke-dasharray="0 502" stroke-linecap="round"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-gray-800" id="totalHours">0h</div>
                                            <div class="text-sm text-gray-600">Total</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Suggestions -->
                        <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg">
                            <h3 class="text-lg font-semibold mb-3">Suggestions for Better Balance</h3>
                            <div id="suggestions" class="space-y-2">
                                <!-- Suggestions will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Modal -->
        <div id="aboutModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-90vh overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-semibold text-gray-800">About Visionary Flow Week</h2>
                            <button id="closeAbout" class="text-gray-500 hover:text-gray-700 text-2xl min-w-11 min-h-11">&times;</button>
                        </div>
                        
                        <div class="space-y-6 text-gray-700">
                            <div>
                                <h3 class="text-lg font-semibold mb-3 text-purple-600">Welcome to Your Weekly Routine Builder</h3>
                                <p>Transform your week from chaotic to intentional with our intuitive visual planning tool. Designed for visionaries who want to create flow in their daily lives while maintaining balance across work, rest, and self-care.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold mb-3 text-purple-600">How to Use This App</h3>
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-purple-100 text-purple-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold flex-shrink-0 mt-0.5">1</span>
                                        <p><strong>Add Your Activities:</strong> Select multiple days for repeat activities and add your weekly activities with start and end times. Choose from Work/Business, Rest, Self-Care, or Other categories.</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-purple-100 text-purple-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold flex-shrink-0 mt-0.5">2</span>
                                        <p><strong>Visual Calendar:</strong> Your calendar automatically updates as you add activities. See your entire week at a glance with color-coded categories.</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-purple-100 text-purple-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold flex-shrink-0 mt-0.5">3</span>
                                        <p><strong>Discover Free Time:</strong> Toggle "View Free Time" to see open blocks in your schedule and assign intentions to them.</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-purple-100 text-purple-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold flex-shrink-0 mt-0.5">4</span>
                                        <p><strong>Weekly Insights:</strong> Open "Weekly Summary" to review where your time goes, see category breakdowns, and get personalized balance suggestions.</p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="bg-purple-100 text-purple-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold flex-shrink-0 mt-0.5">5</span>
                                        <p><strong>Edit & Refine:</strong> Click any activity block to edit or delete it. Use "Reset My Week" to start fresh, or "Export Schedule" to save your plan.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold mb-3 text-purple-600">Features</h3>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Visual weekly calendar</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Color-coded categories</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Free time discovery</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Weekly analytics</span>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Export to Markdown</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Responsive design</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Local data storage</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-green-500">‚úì</span>
                                            <span>Balance suggestions</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-2 text-purple-600">Part of Visionary In Progress</h3>
                                <p class="text-sm">This tool is designed to help visionaries create intentional, balanced weeks that align with their goals and values. Join our community to discover more tools and resources for personal growth.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Modal -->
        <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-semibold text-gray-800">Contact & Support</h2>
                            <button id="closeContact" class="text-gray-500 hover:text-gray-700 text-2xl min-w-11 min-h-11">&times;</button>
                        </div>
                        
                        <div class="space-y-6 text-gray-700">
                            <div>
                                <h3 class="text-lg font-semibold mb-3 text-purple-600">Get Help & Support</h3>
                                <p class="mb-4">Need assistance with Visionary Flow Week? We're here to help you make the most of your weekly planning experience.</p>
                            </div>
                            
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="bg-purple-50 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-2 text-purple-700">Community Support</h4>
                                    <p class="text-sm mb-3">Join our Visionary In Progress community for tips, discussions, and peer support.</p>
                                    <a href="https://www.skool.com/visionary-in-progress-2668/about?ref=e0770bacec584dad84cc27ee0486c1bf" target="_blank" rel="noopener noreferrer" class="text-purple-600 hover:text-purple-700 font-medium text-sm">Visit Community ‚Üí</a>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h4 class="font-semibold mb-2 text-blue-700">Technical Issues</h4>
                                    <p class="text-sm mb-3">Experiencing bugs or technical problems? Let us know so we can improve the app.</p>
                                    <p class="text-blue-600 font-medium text-sm">support@visionaryflow.com</p>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold mb-3 text-purple-600">Frequently Asked Questions</h3>
                                <div class="space-y-3">
                                    <div>
                                        <h4 class="font-medium mb-1">Is my data saved?</h4>
                                        <p class="text-sm text-gray-600">Yes, your schedule is automatically saved to your browser's local storage. Your data stays private on your device.</p>
                                    </div>
                                    <div>
                                        <h4 class="font-medium mb-1">Can I use this on mobile?</h4>
                                        <p class="text-sm text-gray-600">Absolutely! The app is fully responsive and works great on phones, tablets, and desktops.</p>
                                    </div>
                                    <div>
                                        <h4 class="font-medium mb-1">How do I export my schedule?</h4>
                                        <p class="text-sm text-gray-600">Click "Export Schedule" to copy your weekly plan as formatted text that you can paste into any note-taking app.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-semibold mb-2">System Requirements</h4>
                                <p class="text-sm text-gray-600">For the best experience, use a modern web browser (Chrome, Firefox, Safari, Edge) and maintain a stable internet connection. The app works offline once loaded.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Activity Modal -->
        <div id="editActivityModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-xl max-w-md w-full">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-semibold text-gray-800">Edit Activity</h2>
                            <button id="closeEditActivity" class="text-gray-500 hover:text-gray-700 text-2xl min-w-11 min-h-11">&times;</button>
                        </div>
                        
                        <form id="editActivityForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Day</label>
                                <select id="editDaySelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="monday">Monday</option>
                                    <option value="tuesday">Tuesday</option>
                                    <option value="wednesday">Wednesday</option>
                                    <option value="thursday">Thursday</option>
                                    <option value="friday">Friday</option>
                                    <option value="saturday">Saturday</option>
                                    <option value="sunday">Sunday</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Activity Name</label>
                                <input type="text" id="editActivityName" placeholder="e.g., Morning workout" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                <select id="editCategorySelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="work">Work/Business</option>
                                    <option value="rest">Rest</option>
                                    <option value="selfcare">Self-Care</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Start</label>
                                    <input type="time" id="editStartTime" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">End</label>
                                    <input type="time" id="editEndTime" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                                </div>
                            </div>
                            
                            <div id="editTimeValidation" class="text-red-600 text-sm hidden"></div>
                            
                            <div class="flex gap-3 pt-4">
                                <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                                    Save Changes
                                </button>
                                <button type="button" id="deleteActivity" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                                    Delete Activity
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tooltip -->
        <div id="tooltip" class="tooltip absolute bg-gray-800 text-white px-3 py-2 rounded-lg text-sm z-50">
            <div id="tooltipContent"></div>
        </div>
    </div>

    <!-- About Page -->
    <div id="aboutPage" class="container mx-auto px-4 py-8 pb-16 max-w-4xl hidden">
        <div class="glass-card rounded-2xl p-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-8">About Visionary Flow Week</h1>
            
            <div class="space-y-8 text-gray-700">
                <div>
                    <h2 class="text-2xl font-semibold mb-4 text-purple-600">Welcome to Your Weekly Routine Builder</h2>
                    <p class="text-lg leading-relaxed">Transform your week from chaotic to intentional with our intuitive visual planning tool. Designed for visionaries who want to create flow in their daily lives while maintaining balance across work, rest, and self-care.</p>
                </div>
                
                <div>
                    <h2 class="text-2xl font-semibold mb-6 text-purple-600">How to Use This App</h2>
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center text-lg font-bold flex-shrink-0 mt-1">1</span>
                            <div>
                                <h3 class="font-semibold text-lg mb-2">Add Your Activities</h3>
                                <p>Select multiple days for repeat activities and add your weekly activities with start and end times. Choose from Work/Business, Rest, Self-Care, or Other categories.</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center text-lg font-bold flex-shrink-0 mt-1">2</span>
                            <div>
                                <h3 class="font-semibold text-lg mb-2">Visual Calendar</h3>
                                <p>Your calendar automatically updates as you add activities. See your entire week at a glance with color-coded categories.</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center text-lg font-bold flex-shrink-0 mt-1">3</span>
                            <div>
                                <h3 class="font-semibold text-lg mb-2">Discover Free Time</h3>
                                <p>Toggle "View Free Time" to see open blocks in your schedule and assign intentions to them.</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center text-lg font-bold flex-shrink-0 mt-1">4</span>
                            <div>
                                <h3 class="font-semibold text-lg mb-2">Weekly Insights</h3>
                                <p>Open "Weekly Summary" to review where your time goes, see category breakdowns, and get personalized balance suggestions.</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-4">
                            <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center text-lg font-bold flex-shrink-0 mt-1">5</span>
                            <div>
                                <h3 class="font-semibold text-lg mb-2">Edit & Refine</h3>
                                <p>Click any activity block to edit or delete it. Use "Reset My Week" to start fresh, or "Export Schedule" to save your plan.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h2 class="text-2xl font-semibold mb-6 text-purple-600">Features</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Visual weekly calendar</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Color-coded categories</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Free time discovery</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Weekly analytics</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Export to Markdown</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Responsive design</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Local data storage</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-lg">Balance suggestions</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-xl">
                    <h2 class="text-2xl font-semibold mb-3 text-purple-600">Part of Visionary In Progress</h2>
                    <p class="text-lg leading-relaxed">This tool is designed to help visionaries create intentional, balanced weeks that align with their goals and values. Join our community to discover more tools and resources for personal growth.</p>
                    <a href="https://www.skool.com/visionary-in-progress-2668/about?ref=e0770bacec584dad84cc27ee0486c1bf" target="_blank" rel="noopener noreferrer" class="inline-block mt-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                        Join Our Community ‚Üí
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contactPage" class="container mx-auto px-4 py-8 pb-16 max-w-4xl hidden">
        <div class="glass-card rounded-2xl p-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-8">Contact & Support</h1>
            
            <div class="space-y-8 text-gray-700">
                <div>
                    <h2 class="text-2xl font-semibold mb-4 text-purple-600">Get Help & Support</h2>
                    <p class="text-lg leading-relaxed mb-6">Need assistance with Visionary Flow Week? We're here to help you make the most of your weekly planning experience.</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-purple-50 p-6 rounded-xl">
                        <h3 class="text-xl font-semibold mb-3 text-purple-700">Community Support</h3>
                        <p class="mb-4 leading-relaxed">Join our Visionary In Progress community for tips, discussions, and peer support from fellow visionaries building better routines.</p>
                        <a href="https://www.skool.com/visionary-in-progress-2668/about?ref=e0770bacec584dad84cc27ee0486c1bf" target="_blank" rel="noopener noreferrer" class="inline-block bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                            Visit Community ‚Üí
                        </a>
                    </div>
                    
                    <div class="bg-blue-50 p-6 rounded-xl">
                        <h3 class="text-xl font-semibold mb-3 text-blue-700">Technical Issues</h3>
                        <p class="mb-4 leading-relaxed">Experiencing bugs or technical problems? Let us know so we can improve the app for everyone.</p>
                        <div class="bg-white p-3 rounded-lg border">
                            <p class="text-blue-600 font-semibold">support@visionaryflow.com</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h2 class="text-2xl font-semibold mb-4 text-purple-600">About Visionary In Progress</h2>
                    <p class="text-lg leading-relaxed mb-6">Visionary In Progress is a soft productivity community for women building digital offers with AI and story, with soul, strategy, and zero pressure. Expect prompts, monthly projects, co-working, and a resource vault. We do vibes and invoices, with a gentle rhythm that protects your peace.</p>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <a href="https://affirmedvisionary.store" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Website</a>
                        <a href="https://affirmedvisionary.substack.com" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Substack</a>
                        <a href="https://tiktok.com/@justvisionary" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">TikTok</a>
                        <a href="https://instagram.com/aiwith.vip" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Instagram</a>
                        <a href="https://pinterest.com/affirmedvisionary" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Pinterest</a>
                        <a href="https://youtube.com/@affirmedvisionary" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">YouTube</a>
                        <a href="https://discord.gg/affirmedvisionary" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Discord</a>
                        <a href="https://www.skool.com/visionary-in-progress-2668/about?ref=e0770bacec584dad84cc27ee0486c1bf" target="_blank" rel="noopener noreferrer" class="text-center p-3 bg-white rounded-xl border hover:bg-gray-50 transition-colors font-medium">Skool</a>
                    </div>
                </div>
                
                <div>
                    <h2 class="text-2xl font-semibold mb-6 text-purple-600">Frequently Asked Questions</h2>
                    <div class="space-y-6">
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-lg font-semibold mb-2">Is my data saved?</h3>
                            <p class="leading-relaxed">Yes, your schedule is automatically saved to your browser's local storage. Your data stays private on your device and is never sent to external servers.</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-lg font-semibold mb-2">Can I use this on mobile?</h3>
                            <p class="leading-relaxed">Absolutely! The app is fully responsive and works great on phones, tablets, and desktops. The interface adapts to your screen size for the best experience.</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-lg font-semibold mb-2">How do I export my schedule?</h3>
                            <p class="leading-relaxed">Click "Export Schedule" to copy your weekly plan as formatted Markdown text that you can paste into any note-taking app, document, or planning tool.</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h3 class="text-lg font-semibold mb-2">Can I share my schedule with others?</h3>
                            <p class="leading-relaxed">Currently, schedules are stored locally on your device. You can export your schedule as text and share it manually, or take screenshots of your visual calendar.</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-6 rounded-xl">
                    <h3 class="text-xl font-semibold mb-3">System Requirements</h3>
                    <p class="leading-relaxed">For the best experience, use a modern web browser (Chrome, Firefox, Safari, Edge) and maintain a stable internet connection. The app works offline once loaded and doesn't require any downloads or installations.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-6">
        <div class="container mx-auto px-4 text-center">
            <div class="text-sm text-gray-600">
                ¬© 2025 Visionary Flow Week ¬∑ <a href="https://www.skool.com/visionary-in-progress-2668/about?ref=e0770bacec584dad84cc27ee0486c1bf" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-700">Visionary In Progress</a> ¬∑ All Rights Reserved
            </div>
        </div>
    </footer>

    <script>
        // Global state
        let activities = JSON.parse(localStorage.getItem('weeklyActivities') || '[]');
        let activityId = parseInt(localStorage.getItem('activityId') || '0');
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        let showingFreeTime = false;
        let hasCompletedWeek = false;
        let expandedHours = false;

        // Motivation messages
        const motivationMessages = [
            "Building great routines takes time - you're doing amazing!",
            "Every small step towards better planning counts!",
            "Your future self will thank you for this organization!",
            "Consistency is key - keep building those healthy habits!",
            "You're creating the foundation for a more balanced life!",
            "Planning ahead is a superpower - you've got this!",
            "Small changes in routine can lead to big improvements!"
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeTheme();
            generateCalendar();
            renderActivities();
            startMotivationRotation();
            setupEventListeners();
            checkWeekCompletion();
        });

        function initializeTheme() {
            if (isDarkMode) {
                document.body.classList.add('dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
            }
        }

        function startMotivationRotation() {
            let currentIndex = 0;
            setInterval(() => {
                currentIndex = (currentIndex + 1) % motivationMessages.length;
                document.getElementById('motivationText').textContent = motivationMessages[currentIndex];
            }, 5000);
        }

        function setupEventListeners() {
            // Form submission
            document.getElementById('activityForm').addEventListener('submit', handleActivitySubmit);
            
            // Time validation
            document.getElementById('startTime').addEventListener('change', validateTimes);
            document.getElementById('endTime').addEventListener('change', validateTimes);
            
            // Control buttons
            document.getElementById('viewFreeTime').addEventListener('click', toggleFreeTime);
            document.getElementById('showSummary').addEventListener('click', showWeeklySummary);
            document.getElementById('resetWeek').addEventListener('click', resetWeek);
            document.getElementById('exportWeek').addEventListener('click', exportWeek);
            
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // Expand hours toggle
            document.getElementById('expandHours').addEventListener('click', toggleExpandHours);
            
            // Navigation
            document.getElementById('homeLink').addEventListener('click', () => showPage('home'));
            document.getElementById('showApp').addEventListener('click', () => showPage('app'));
            document.getElementById('showAbout').addEventListener('click', () => showPage('about'));
            document.getElementById('showContact').addEventListener('click', () => showPage('contact'));
            document.getElementById('showAppMobile').addEventListener('click', () => {
                showPage('app');
                toggleMobileMenu();
            });
            document.getElementById('showAboutMobile').addEventListener('click', () => {
                showPage('about');
                toggleMobileMenu();
            });
            document.getElementById('showContactMobile').addEventListener('click', () => {
                showPage('contact');
                toggleMobileMenu();
            });
            
            // Home page buttons
            document.getElementById('startPlanning').addEventListener('click', () => showPage('app'));
            document.getElementById('learnMore').addEventListener('click', () => showPage('about'));
            document.getElementById('mobileMenuToggle').addEventListener('click', toggleMobileMenu);
            
            // Modal controls
            document.getElementById('closeSummary').addEventListener('click', () => hideModal('summaryModal'));
            document.getElementById('closeEditActivity').addEventListener('click', () => hideModal('editActivityModal'));
            
            // Edit activity form
            document.getElementById('editActivityForm').addEventListener('submit', handleEditActivitySubmit);
            document.getElementById('deleteActivity').addEventListener('click', handleDeleteActivity);
            document.getElementById('editStartTime').addEventListener('change', validateEditTimes);
            document.getElementById('editEndTime').addEventListener('change', validateEditTimes);
            
            // Close modals on backdrop click
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        hideModal(modal.id);
                    }
                });
            });
        }

        function handleActivitySubmit(e) {
            e.preventDefault();
            
            const name = document.getElementById('activityName').value.trim();
            const selectedDays = Array.from(document.querySelectorAll('.day-checkbox:checked')).map(cb => cb.value);
            const category = document.getElementById('categorySelect').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;
            
            if (selectedDays.length === 0) {
                alert('Please select at least one day for this activity.');
                return;
            }
            
            if (!validateTimes()) return;
            
            // Create activity for each selected day
            selectedDays.forEach(day => {
                const activity = {
                    id: activityId++,
                    name,
                    day,
                    category,
                    startTime,
                    endTime
                };
                activities.push(activity);
            });
            
            saveData();
            renderActivities();
            
            // Clear form
            document.getElementById('activityForm').reset();
            
            // Success animation
            const submitBtn = document.querySelector('button[type="submit"]');
            submitBtn.classList.add('success-check');
            setTimeout(() => submitBtn.classList.remove('success-check'), 600);
            
            checkWeekCompletion();
        }

        function validateTimes() {
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;
            const validation = document.getElementById('timeValidation');
            
            if (startTime && endTime) {
                if (startTime >= endTime) {
                    validation.textContent = 'End time must be after start time';
                    validation.classList.remove('hidden');
                    return false;
                }
            }
            
            validation.classList.add('hidden');
            return true;
        }

        function generateCalendar() {
            generateTimeLabels();
            generateGridLines();
            generateDayColumns();
        }

        function generateTimeLabels() {
            const container = document.getElementById('timeLabels');
            const startHour = expandedHours ? 0 : 6;
            const endHour = expandedHours ? 23 : 22;
            
            container.innerHTML = '';
            
            for (let hour = startHour; hour <= endHour; hour++) {
                const label = document.createElement('div');
                label.className = 'time-label';
                
                const displayHour = hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
                const ampm = hour >= 12 ? 'PM' : 'AM';
                label.textContent = `${displayHour}${ampm}`;
                
                container.appendChild(label);
            }
        }
        
        function generateGridLines() {
            const container = document.getElementById('gridLines');
            const startHour = expandedHours ? 0 : 6;
            const endHour = expandedHours ? 23 : 22;
            const totalHours = endHour - startHour + 1;
            
            container.innerHTML = '';
            
            for (let i = 0; i < totalHours; i++) {
                const line = document.createElement('div');
                line.className = 'grid-line';
                container.appendChild(line);
            }
        }
        
        function generateDayColumns() {
            const container = document.getElementById('daysGrid');
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const dayNames = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            
            // Remove existing day columns (keep grid lines)
            const existingColumns = container.querySelectorAll('.day-column');
            existingColumns.forEach(col => col.remove());
            
            days.forEach((day, index) => {
                const dayColumn = document.createElement('div');
                dayColumn.className = 'day-column';
                dayColumn.innerHTML = `
                    <div class="day-header">${dayNames[index]}</div>
                    <div class="day-content ${showingFreeTime ? 'showing-free-time' : ''}" id="${day}-activities">
                        <!-- Activities will be rendered here -->
                    </div>
                `;
                container.appendChild(dayColumn);
            });
        }
        
        function toggleExpandHours() {
            expandedHours = !expandedHours;
            const expandText = document.getElementById('expandText');
            
            if (expandedHours) {
                expandText.textContent = 'Collapse hours';
            } else {
                expandText.textContent = 'Expand hours';
            }
            
            generateCalendar();
            renderActivities();
        }

        function renderActivities() {
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            
            days.forEach(day => {
                const container = document.getElementById(`${day}-activities`);
                if (!container) return;
                
                // Clear existing activities but keep the container classes
                container.innerHTML = '';
                container.className = `day-content ${showingFreeTime ? 'showing-free-time' : ''}`;
                
                const dayActivities = activities
                    .filter(activity => activity.day === day)
                    .sort((a, b) => a.startTime.localeCompare(b.startTime));
                
                // Check for overlaps and render activities
                const renderedActivities = [];
                dayActivities.forEach(activity => {
                    const activityElement = createActivityElement(activity, renderedActivities);
                    container.appendChild(activityElement);
                    renderedActivities.push({
                        element: activityElement,
                        startTime: activity.startTime,
                        endTime: activity.endTime
                    });
                });
                
                if (showingFreeTime) {
                    renderFreeTimeBlocks(day, dayActivities);
                }
            });
        }

        function createActivityElement(activity, renderedActivities = []) {
            const startMinutes = timeToMinutes(activity.startTime);
            const endMinutes = timeToMinutes(activity.endTime);
            const duration = endMinutes - startMinutes;
            
            const baseHour = expandedHours ? 0 : 6;
            const baseMinutes = baseHour * 60;
            const topPosition = (startMinutes - baseMinutes);
            
            // Check for overlaps
            const hasOverlap = renderedActivities.some(rendered => {
                const renderedStart = timeToMinutes(rendered.startTime);
                const renderedEnd = timeToMinutes(rendered.endTime);
                return (startMinutes < renderedEnd && endMinutes > renderedStart);
            });
            
            const div = document.createElement('div');
            div.className = `activity-card ${hasOverlap ? 'overlapped' : ''}`;
            
            // Set border color based on category
            const categoryColors = {
                work: '#3b82f6',
                rest: '#10b981', 
                selfcare: '#f59e0b',
                other: '#8b5cf6'
            };
            
            div.style.borderLeftColor = categoryColors[activity.category];
            div.style.top = `${Math.max(0, topPosition)}px`;
            div.style.height = `${duration}px`;
            
            div.innerHTML = `
                <div class="activity-title">${activity.name}</div>
            `;
            
            // Tooltip
            div.addEventListener('mouseenter', (e) => showTooltip(e, activity));
            div.addEventListener('mouseleave', hideTooltip);
            
            // Click to edit/delete
            div.addEventListener('click', () => editActivity(activity));
            
            return div;
        }

        function renderFreeTimeBlocks(day, dayActivities) {
            const container = document.getElementById(`${day}-activities`);
            
            // Find gaps between activities
            const gaps = findFreeTimeGaps(dayActivities);
            
            gaps.forEach(gap => {
                const baseHour = expandedHours ? 0 : 6;
                const baseMinutes = baseHour * 60;
                const topPosition = gap.start - baseMinutes;
                
                const freeBlock = document.createElement('div');
                freeBlock.className = 'free-time-block';
                freeBlock.style.top = `${Math.max(0, topPosition)}px`;
                freeBlock.style.height = `${gap.duration}px`;
                
                freeBlock.innerHTML = `
                    <div class="free-time-content">
                        <div class="font-medium">Free Time</div>
                        <div>${Math.round(gap.duration / 60)}h ${gap.duration % 60}m</div>
                    </div>
                `;
                
                freeBlock.addEventListener('click', () => assignFreeTime(day, gap));
                
                container.appendChild(freeBlock);
            });
        }

        function findFreeTimeGaps(dayActivities) {
            const gaps = [];
            const dayStart = expandedHours ? 0 : 360; // 12 AM or 6 AM
            const dayEnd = expandedHours ? 1440 : 1320; // 12 AM next day or 10 PM
            
            if (dayActivities.length === 0) {
                gaps.push({ start: dayStart, end: dayEnd, duration: dayEnd - dayStart });
                return gaps;
            }
            
            // Sort activities by start time
            const sorted = dayActivities.sort((a, b) => timeToMinutes(a.startTime) - timeToMinutes(b.startTime));
            
            // Check gap before first activity
            const firstStart = timeToMinutes(sorted[0].startTime);
            if (firstStart > dayStart) {
                gaps.push({ start: dayStart, end: firstStart, duration: firstStart - dayStart });
            }
            
            // Check gaps between activities
            for (let i = 0; i < sorted.length - 1; i++) {
                const currentEnd = timeToMinutes(sorted[i].endTime);
                const nextStart = timeToMinutes(sorted[i + 1].startTime);
                
                if (nextStart > currentEnd) {
                    gaps.push({ start: currentEnd, end: nextStart, duration: nextStart - currentEnd });
                }
            }
            
            // Check gap after last activity
            const lastEnd = timeToMinutes(sorted[sorted.length - 1].endTime);
            if (lastEnd < dayEnd) {
                gaps.push({ start: lastEnd, end: dayEnd, duration: dayEnd - lastEnd });
            }
            
            return gaps.filter(gap => gap.duration >= 30); // Only show gaps of 30+ minutes
        }

        function assignFreeTime(day, gap) {
            const category = prompt('Assign this free time to:\n1. Rest\n2. Work/Business\n3. Self-Care\n\nEnter 1, 2, or 3:');
            
            const categoryMap = {
                '1': 'rest',
                '2': 'work',
                '3': 'selfcare'
            };
            
            if (categoryMap[category]) {
                const startTime = minutesToTime(gap.start);
                const endTime = minutesToTime(gap.end);
                
                const activity = {
                    id: activityId++,
                    name: `Free Time (${categoryMap[category]})`,
                    day,
                    category: categoryMap[category],
                    startTime,
                    endTime
                };
                
                activities.push(activity);
                saveData();
                renderActivities();
            }
        }

        let currentEditingActivity = null;

        function editActivity(activity) {
            currentEditingActivity = activity;
            
            // Populate the edit form
            document.getElementById('editDaySelect').value = activity.day;
            document.getElementById('editActivityName').value = activity.name;
            document.getElementById('editCategorySelect').value = activity.category;
            document.getElementById('editStartTime').value = activity.startTime;
            document.getElementById('editEndTime').value = activity.endTime;
            
            // Clear any validation errors
            document.getElementById('editTimeValidation').classList.add('hidden');
            
            // Show the modal
            showModal('editActivityModal');
        }

        function handleEditActivitySubmit(e) {
            e.preventDefault();
            
            if (!currentEditingActivity) return;
            
            const name = document.getElementById('editActivityName').value.trim();
            const day = document.getElementById('editDaySelect').value;
            const category = document.getElementById('editCategorySelect').value;
            const startTime = document.getElementById('editStartTime').value;
            const endTime = document.getElementById('editEndTime').value;
            
            if (!validateEditTimes()) return;
            
            // Update the activity
            const activityIndex = activities.findIndex(a => a.id === currentEditingActivity.id);
            if (activityIndex !== -1) {
                activities[activityIndex] = {
                    ...currentEditingActivity,
                    name,
                    day,
                    category,
                    startTime,
                    endTime
                };
                
                saveData();
                renderActivities();
                hideModal('editActivityModal');
                currentEditingActivity = null;
            }
        }

        function handleDeleteActivity() {
            if (!currentEditingActivity) return;
            
            if (confirm(`Are you sure you want to delete "${currentEditingActivity.name}"?`)) {
                activities = activities.filter(a => a.id !== currentEditingActivity.id);
                saveData();
                renderActivities();
                hideModal('editActivityModal');
                currentEditingActivity = null;
            }
        }

        function validateEditTimes() {
            const startTime = document.getElementById('editStartTime').value;
            const endTime = document.getElementById('editEndTime').value;
            const validation = document.getElementById('editTimeValidation');
            
            if (startTime && endTime) {
                if (startTime >= endTime) {
                    validation.textContent = 'End time must be after start time';
                    validation.classList.remove('hidden');
                    return false;
                }
            }
            
            validation.classList.add('hidden');
            return true;
        }

        function toggleFreeTime() {
            showingFreeTime = !showingFreeTime;
            const btn = document.getElementById('viewFreeTime');
            
            if (showingFreeTime) {
                btn.textContent = 'Hide Free Time';
                btn.classList.remove('bg-purple-300', 'hover:bg-purple-400', 'text-purple-800');
                btn.classList.add('bg-orange-300', 'hover:bg-orange-400', 'text-orange-800');
            } else {
                btn.textContent = 'View Free Time';
                btn.classList.remove('bg-orange-300', 'hover:bg-orange-400', 'text-orange-800');
                btn.classList.add('bg-purple-300', 'hover:bg-purple-400', 'text-purple-800');
            }
            
            renderActivities();
        }

        function showWeeklySummary() {
            calculateWeeklySummary();
            showModal('summaryModal');
        }

        function calculateWeeklySummary() {
            const categoryTotals = { work: 0, rest: 0, selfcare: 0, other: 0 };
            const dayTotals = {};
            let totalScheduled = 0;
            let longestFreeBlock = 0;
            let busiestDay = '';
            let maxDayHours = 0;
            
            // Calculate category totals
            activities.forEach(activity => {
                const duration = timeToMinutes(activity.endTime) - timeToMinutes(activity.startTime);
                const hours = duration / 60;
                
                categoryTotals[activity.category] += hours;
                totalScheduled += hours;
                
                if (!dayTotals[activity.day]) dayTotals[activity.day] = 0;
                dayTotals[activity.day] += hours;
                
                if (dayTotals[activity.day] > maxDayHours) {
                    maxDayHours = dayTotals[activity.day];
                    busiestDay = activity.day.charAt(0).toUpperCase() + activity.day.slice(1);
                }
            });
            
            // Calculate free time and longest free block
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            let totalFree = 0;
            
            days.forEach(day => {
                const dayActivities = activities.filter(a => a.day === day);
                const gaps = findFreeTimeGaps(dayActivities);
                
                gaps.forEach(gap => {
                    const freeHours = gap.duration / 60;
                    totalFree += freeHours;
                    if (freeHours > longestFreeBlock) {
                        longestFreeBlock = freeHours;
                    }
                });
            });
            
            // Update UI
            document.getElementById('totalScheduled').textContent = `${Math.round(totalScheduled)}h`;
            document.getElementById('totalFree').textContent = `${Math.round(totalFree)}h`;
            document.getElementById('longestFree').textContent = `${Math.round(longestFreeBlock)}h`;
            document.getElementById('busiestDay').textContent = busiestDay || '-';
            document.getElementById('totalHours').textContent = `${Math.round(totalScheduled)}h`;
            
            // Update category breakdown
            updateCategoryBreakdown(categoryTotals);
            updateDonutChart(categoryTotals, totalScheduled);
            generateSuggestions(categoryTotals, totalScheduled);
        }

        function updateCategoryBreakdown(categoryTotals) {
            const container = document.getElementById('categoryBreakdown');
            const categories = [
                { key: 'work', name: 'Work/Business', color: 'bg-blue-500' },
                { key: 'rest', name: 'Rest', color: 'bg-green-500' },
                { key: 'selfcare', name: 'Self-Care', color: 'bg-yellow-500' },
                { key: 'other', name: 'Other', color: 'bg-purple-500' }
            ];
            
            const total = Object.values(categoryTotals).reduce((sum, val) => sum + val, 0);
            
            container.innerHTML = categories.map(cat => {
                const hours = categoryTotals[cat.key];
                const percentage = total > 0 ? (hours / total) * 100 : 0;
                
                return `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-4 h-4 ${cat.color} rounded mr-3"></div>
                            <span class="text-sm">${cat.name}</span>
                        </div>
                        <div class="text-sm font-medium">${Math.round(hours)}h (${Math.round(percentage)}%)</div>
                    </div>
                `;
            }).join('');
        }

        function updateDonutChart(categoryTotals, total) {
            const circumference = 2 * Math.PI * 80; // radius = 80
            const categories = ['work', 'rest', 'selfcare', 'other'];
            let currentOffset = 0;
            
            categories.forEach(category => {
                const hours = categoryTotals[category];
                const percentage = total > 0 ? hours / total : 0;
                const strokeDasharray = `${percentage * circumference} ${circumference}`;
                const strokeDashoffset = -currentOffset * circumference;
                
                const arc = document.getElementById(`${category}Arc`);
                arc.style.strokeDasharray = strokeDasharray;
                arc.style.strokeDashoffset = strokeDashoffset;
                
                currentOffset += percentage;
            });
        }

        function generateSuggestions(categoryTotals, totalScheduled) {
            const container = document.getElementById('suggestions');
            const suggestions = [];
            
            if (categoryTotals.rest < 8) {
                suggestions.push('Consider adding more rest time - aim for at least 8 hours of rest per week.');
            }
            
            if (categoryTotals.selfcare < 3) {
                suggestions.push('Try to schedule some self-care activities - even 30 minutes a day makes a difference.');
            }
            
            if (totalScheduled > 80) {
                suggestions.push('Your schedule looks quite packed - consider if some activities could be shortened or rescheduled.');
            }
            
            if (totalScheduled < 20) {
                suggestions.push('You have plenty of free time - consider adding some structured activities or goals.');
            }
            
            if (suggestions.length === 0) {
                suggestions.push('Your schedule looks well-balanced! Keep up the great work.');
            }
            
            container.innerHTML = suggestions.map(suggestion => 
                `<div class="text-sm text-gray-700 bg-white p-3 rounded-lg">${suggestion}</div>`
            ).join('');
        }

        function resetWeek() {
            if (confirm('Are you sure you want to reset your entire week? This will delete all activities and cannot be undone.')) {
                activities = [];
                activityId = 0;
                saveData();
                renderActivities();
                
                // Clear any free time view
                if (showingFreeTime) {
                    toggleFreeTime();
                }
            }
        }

        function exportWeek() {
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const dayNames = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            
            let exportText = '# My Weekly Schedule\n\n';
            
            days.forEach((day, index) => {
                const dayActivities = activities
                    .filter(activity => activity.day === day)
                    .sort((a, b) => a.startTime.localeCompare(b.startTime));
                
                exportText += `## ${dayNames[index]}\n\n`;
                
                if (dayActivities.length === 0) {
                    exportText += '*No scheduled activities*\n\n';
                } else {
                    dayActivities.forEach(activity => {
                        const startFormatted = formatTime(activity.startTime);
                        const endFormatted = formatTime(activity.endTime);
                        const categoryEmoji = {
                            work: 'üíº',
                            rest: 'üò¥',
                            selfcare: 'üßò',
                            other: 'üìù'
                        };
                        
                        exportText += `- **${startFormatted} - ${endFormatted}**: ${activity.name} ${categoryEmoji[activity.category]}\n`;
                    });
                    exportText += '\n';
                }
            });
            
            // Add summary section
            const categoryTotals = { work: 0, rest: 0, selfcare: 0, other: 0 };
            let totalScheduled = 0;
            
            activities.forEach(activity => {
                const duration = timeToMinutes(activity.endTime) - timeToMinutes(activity.startTime);
                const hours = duration / 60;
                categoryTotals[activity.category] += hours;
                totalScheduled += hours;
            });
            
            exportText += '## Weekly Summary\n\n';
            exportText += `**Total Scheduled Hours**: ${Math.round(totalScheduled)}h\n\n`;
            exportText += '### Time by Category\n\n';
            exportText += `- üíº **Work/Business**: ${Math.round(categoryTotals.work)}h\n`;
            exportText += `- üò¥ **Rest**: ${Math.round(categoryTotals.rest)}h\n`;
            exportText += `- üßò **Self-Care**: ${Math.round(categoryTotals.selfcare)}h\n`;
            exportText += `- üìù **Other**: ${Math.round(categoryTotals.other)}h\n\n`;
            
            exportText += '*Generated with Weekly Routine Builder*';
            
            // Copy to clipboard
            navigator.clipboard.writeText(exportText).then(() => {
                alert('Markdown schedule copied to clipboard! You can paste it into any markdown editor or note-taking app.');
            }).catch(() => {
                // Fallback: show in alert
                alert('Your markdown schedule:\n\n' + exportText);
            });
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            
            const body = document.body;
            const icon = document.getElementById('themeIcon');
            
            if (isDarkMode) {
                body.classList.add('dark');
                icon.textContent = '‚òÄÔ∏è';
            } else {
                body.classList.remove('dark');
                icon.textContent = 'üåô';
            }
        }

        function checkWeekCompletion() {
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const hasActivitiesAllDays = days.every(day => 
                activities.some(activity => activity.day === day)
            );
            
            if (hasActivitiesAllDays && !hasCompletedWeek) {
                hasCompletedWeek = true;
                triggerConfetti();
            }
        }

        function triggerConfetti() {
            const colors = ['#f59e0b', '#3b82f6', '#10b981', '#8b5cf6', '#ef4444'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 100);
            }
        }

        function showTooltip(e, activity) {
            const tooltip = document.getElementById('tooltip');
            const content = document.getElementById('tooltipContent');
            
            const startFormatted = formatTime(activity.startTime);
            const endFormatted = formatTime(activity.endTime);
            const duration = timeToMinutes(activity.endTime) - timeToMinutes(activity.startTime);
            const durationFormatted = `${Math.floor(duration / 60)}h ${duration % 60}m`;
            
            content.innerHTML = `
                <div class="font-medium">${activity.name}</div>
                <div class="text-xs">${startFormatted} - ${endFormatted}</div>
                <div class="text-xs">Duration: ${durationFormatted}</div>
                <div class="text-xs">Category: ${activity.category}</div>
            `;
            
            tooltip.style.left = e.pageX + 10 + 'px';
            tooltip.style.top = e.pageY - 10 + 'px';
            tooltip.classList.add('show');
        }

        function hideTooltip() {
            document.getElementById('tooltip').classList.remove('show');
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function showPage(page) {
            // Hide all pages
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('aboutPage').classList.add('hidden');
            document.getElementById('contactPage').classList.add('hidden');
            
            // Show selected page
            if (page === 'home') {
                document.getElementById('homePage').classList.remove('hidden');
            } else if (page === 'app') {
                document.getElementById('mainContent').classList.remove('hidden');
            } else if (page === 'about') {
                document.getElementById('aboutPage').classList.remove('hidden');
            } else if (page === 'contact') {
                document.getElementById('contactPage').classList.remove('hidden');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const icon = document.getElementById('mobileMenuIcon');
            
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                icon.textContent = '‚úï';
            } else {
                menu.classList.add('hidden');
                icon.textContent = '‚ò∞';
            }
        }

        // Utility functions
        function timeToMinutes(timeString) {
            const [hours, minutes] = timeString.split(':').map(Number);
            return hours * 60 + minutes;
        }

        function minutesToTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;
        }

        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':').map(Number);
            const period = hours >= 12 ? 'PM' : 'AM';
            const displayHours = hours > 12 ? hours - 12 : hours === 0 ? 12 : hours;
            return `${displayHours}:${minutes.toString().padStart(2, '0')} ${period}`;
        }

        function saveData() {
            localStorage.setItem('weeklyActivities', JSON.stringify(activities));
            localStorage.setItem('activityId', activityId.toString());
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989ce5de72c1b376',t:'MTc1OTY2NzA4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
